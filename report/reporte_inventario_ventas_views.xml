<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <template id="reporte_inventario_ventas">
            <t t-call="web.html_container">

                    <t t-call="web.external_layout">

                        <div class="page">
                            <center>
                                <h4><span t-esc="company_id.name"/>: Libro de ventas y servicios</h4> <br/><br/><br/>
                            </center>

                            
                            <table width="100%">
                                <tr>
                                    <td><strong>Número de identificación tributaria:</strong></td>
                                    <td><span t-field="company_id.vat" align="center"/></td>
                                    <td><strong>Nombre comercial:</strong> </td>
                                    <td><span t-field="company_id.partner_id.name" align="center"/></td>
                                </tr>
                                <tr>
                                    <td><strong>Domicilio fiscal:</strong></td>
                                    <td><span t-esc="direccion_diario or company_id.partner_id.street" align="center"/></td>
                                    <td><strong>Registro del:</strong></td>
                                    <td><span t-esc="data['fecha_inicio']" t-options='{"widget":"date"}' align="center"/> al: <span t-esc="data['fecha_fin']" t-options='{"widget": "date"}'/></td>
                                </tr>

                            </table>

                            <table class="table table-sm o_main_table">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Documento</th>
                                        <th>NIT</th>
                                        <th>Cliente</th>
                                        <th class="text-right">Bien</th>
                                        <th class="text-right">Ventas exentas</th>
                                        <th class="text-right">Servicios</th>
                                        <th class="text-right">Servicios exentos</th>
                                        <th class="text-right">Exportacion</th>
                                        <th class="text-right">IVA</th>
                                        <th class="text-right">Bruto</th>
                                        <th class="text-right">Reten IVA</th>
                                        <th class="text-right">Correlativo interno</th>
                                        <th class="text-right">País destino</th>
                                        <th class="text-right">OBSERVACIONES</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="_get_ventas(data)['compras_lista']" t-as="linea">
                                        <td><span t-esc="linea['fecha']" t-options='{"widget": "date"}'/></td>
                                        <td><span t-esc="linea['documento']"/></td>
                                        <td><span t-esc="linea['nit']"/></td>
                                        <td><span t-esc="linea['proveedor']"/></td>
                                        <td class="text-right"><span t-esc="linea['compra']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></td>
                                        <td class="text-right"><span t-esc="linea['compra_exento']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></td>

                                        <td class="text-right"><span t-esc="linea['servicio']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></td>
                                        <td class="text-right"><span t-esc="linea['servicio_exento']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></td>

                                        <td class="text-right"><span t-esc="linea['importacion']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></td>

                                        <td class="text-right"><span t-esc="linea['iva']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></td>
                                        <!-- <td class="text-right"><span t-esc="linea['bruto']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></td> -->

                                        <td class="text-right"><span t-esc="linea['total']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></td>

                                        <td class="text-right"><span t-esc="linea['reten_iva']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></td>
                                        <td class="text-right"><span t-esc="linea['correlativo_interno']"/></td>
                                        <td class="text-right"><span t-esc="linea['pais_destino']" /></td>
                                        <td class="text-right"><span t-esc="linea['observaciones']" /></td>

                                    </tr>
                                    <t t-set="t" t-value="_get_ventas(data)['total']"/>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td class="text-right"><strong><span t-esc="t['compra']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></strong></td>
                                        <td class="text-right"><strong><span t-esc="t['compra_exento']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></strong></td>

                                        <td class="text-right"><strong><span t-esc="t['servicio']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></strong></td>
                                        <td class="text-right"><strong><span t-esc="t['servicio_exento']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></strong></td>

                                        <td class="text-right"><strong><span t-esc="t['importacion']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></strong></td>

                                        <td class="text-right"><strong><span t-esc="t['iva']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></strong></td>
                                        <!-- <td class="text-right"><strong><span t-esc="t['bruto']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></strong></td> -->

                                        <td class="text-right"><strong><span t-esc="t['total']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></strong></td>
                                        <td class="text-right"><strong><span t-esc="t['reten_iva']" t-options="{'widget': 'monetary', 'display_currency': user.company_id.currency_id}"/></strong></td>

                                    </tr>
                                    
                                </tbody>
                            </table>

                          
                        </div>
                </t>
            </t>
        </template>

    </data>
</odoo>
